<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en_US" lang="en_US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<!--doc-version-default-links-begin-->
<!-- Please do not edit the below line(s) manually, see DocumentVersioning.qs (151018182358), version 1.0.0.1-->
<!-- Bootstrap core CSS -->
<link href="../../bootstrap/css/bootstrap.min.css" type="text/css" rel="stylesheet"/>
<!-- Bootstrap theme -->
<link href="../../bootstrap/css/bootstrap-theme.min.css" type="text/css" rel="stylesheet"/>
<!-- Code-Prettify -->
<link href="../../google-code-prettify/prettify.css" type="text/css" rel="stylesheet"/>
<script src="../../google-code-prettify/prettify.js" type="text/javascript"></script>
<!-- Custom styles for this template -->
<link href="../../css/custom_theme.css" type="text/css" rel="stylesheet"/>
<!--doc-version-default-links-end-->
<!--doc-version-title-begin-->
<!-- Please do not edit the below line(s) manually, see DocumentVersioning.qs (151018182358), version 1.0.0.1-->
<title>Experiment Manager Plug-in v1.0</title>
<!--doc-version-title-end-->
</head>
<body>
    <div class="container">
<!--doc-version-default-header-begin-->
<!-- Please do not edit the below line(s) manually, see DocumentVersioning.qs (151018182358), version 1.0.0.1-->
	<div class="doc-header">
		<div class="alert alert-info" role="alert">
			<h1>Experiment Manager Plug-in (v1.0.0.1)</h1>
			<div class="row">
				<div class="col-md-4"><p><strong>Document version:</strong>1.0</p></div>
				<div class="col-md-4"><p><strong>Author(s):</strong>Sven Gijsen</p></div>
				<div class="col-md-4"><p><strong>Date:</strong>July 2015</p></div>
			</div>
		</div>
	</div>
<!--doc-version-default-header-end-->
        <div id="toc_Area">
            <ul id="toc"></ul>
            <h2>Introduction</h2>
            <p>The Experiment Manager Plug-in implements a Experiment Engine that you can use to present various kinds of stimuli. It can load  an Experiment file (*.exml) that defines the configuration  for the experiment; see the EXML-File definition. The Experiment Manager can be created and used  by a script or can be used directly by executing an Experiment file by  BrainStim.</p>
            <h3>Directories</h3>
            <p>The Experiment manager uses the following directories inside the main root BrainStim directory:</p>
            <p>
                <strong>/outputs</strong><br />
                this directory is used for storing files created by the Experiment Manager.
            </p>
            <h2>EXML-File definition</h2>
            <p>The experiment file is an <a href="http://en.wikipedia.org/wiki/XML" target="_blank">XML file type</a> that can be loaded by the Experiment Manger for its configuration. You can manually edit this document in BrainStim or another text/code editor. The first lines consist out of a file header:</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;?xml version='1.0' encoding='UTF-8'?&gt;<br />&lt;!DOCTYPE EXML&gt;<br />&lt;!-- <br />This is a comment example<br />Place you own text here...<br />--&gt;<br />&lt;EXML version=&quot;2.0.0.2&quot;&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>The header holds the XML and EXML version, there?s no reason for a user to change this manually. You may also find text between the &lt;!--�and --&gt;�tag, these are used for comments and the text section between these tags is not parsed by the Experiment Manager.</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;defines&gt;<br />    &lt;experiment ID=&quot;0&quot;&gt;<br />        &lt;name&gt;Experiment name&lt;/name&gt;<br />        &lt;debugmode&gt;false&lt;/debugmode&gt;<br />    &lt;/experiment&gt;<br />&lt;/defines&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>The &lt;defines&gt;�section has an &lt;experiment&gt; section where the name of the experiment can be defined. Some tags include an ID=&quot;&lt;number&gt;&quot;�attribute, this unique ID is automatically generated and used internally by BrainStim and therefore you should not change this. The &lt;debugmode&gt; section defines whether the experiment should be executed in debugmode or not. This debugmode can be helpful during the setup and debugging of the experiment because it outputs some extra information regarding the experiment. Because it can slow down the experiment speed you should disable it when you need to be sure it runs smoothly.</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;declarations&gt; 
	    &lt;object�ID=&quot;0&quot;&gt;
		&lt;class&gt;TriggerTimer&lt;/class&gt;
		&lt;name&gt;Timer_Object_1&lt;/name&gt;
		&lt;constructor&gt;
		    &lt;param1/&gt;
		&lt;/constructor&gt;
	    &lt;/object&gt;
	&nbsp;
	    &lt;object�ID=&quot;1&quot;&gt; 
		&lt;class&gt;RetinotopyMapper&lt;/class&gt;
		&lt;name&gt;RetinotopyMapper_object&lt;/name&gt;
		&lt;constructor&gt;
		    &lt;param1/&gt;
		&lt;/constructor&gt;
	    &lt;/object&gt; 
	&lt;/declarations&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>In the &lt;declarations&gt; section all needed experiment objects are declared so they can be used for the experiment. The name &lt;name&gt;�of the new object that should be constructed from a class &lt;class&gt; together with the optional parameter(s) &lt;param&lt;number&gt;&gt; are defined her per object.</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;connections&gt; 
	    &lt;object�ID=&quot;2&quot;&gt; 
		&lt;type&gt;signal&lt;/type&gt; 
		&lt;signature&gt;CaptureThreadTriggered(short)&lt;/signature&gt; 
		&lt;target�ID=&quot;1&quot;&gt; 
		    &lt;type&gt;slot&lt;/type&gt;  
		    &lt;signature&gt;incrementExternalTrigger()&lt;/signature&gt;
		&lt;/target&gt;
	    &lt;/object&gt;
	    &lt;object�ID=&quot;0&quot;&gt; 
		&lt;type&gt;signal&lt;/type&gt; 
		&lt;signature&gt;timeout()&lt;/signature&gt; 
		&lt;target�ID=&quot;1&quot;&gt; 
		    &lt;type&gt;slot&lt;/type&gt;  
		    &lt;signature&gt;incrementExternalTrigger()&lt;/signature&gt;
		&lt;/target&gt;
	    &lt;/object&gt;
	&lt;/connections&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>Inside the &lt;connections&gt; section the declared objects can be connected to each other (internally BrainStim is using the Qt signal/slot mechanism for establishing the connections, see <a href="http://qt-project.org/doc/qt-5.1/qtcore/signalsandslots.html" target="_blank">http://qt-project.org/doc/qt-5.1/qtcore/signalsandslots.html</a>). Signals and Slots can be connected to each other, the Signal or Slot (define this first by using the &lt;type&gt; section) signature &lt;signature&gt; can also be defined here.</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;initializations&gt;
	    &lt;object�ID=&quot;0&quot;&gt;
		&lt;type&gt;slot&lt;/type&gt;
		&lt;signature&gt;startTimer&lt;/signature&gt;
		&lt;parameters&gt;
		    &lt;parameter�ID=&quot;0&quot;&gt;
			&lt;name&gt;msec&lt;/name&gt;
			&lt;value&gt;200&lt;/value&gt;
			&lt;type&gt;double&lt;/type&gt;
		    &lt;/parameter&gt;
		&lt;/parameters&gt;
	    &lt;/object&gt;
	&lt;/initializations&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>Declared objects often need to be initialized before they can be used. This can be defined within the &lt;initializations&gt; section. Initialization is done before the experiment starts and is done by providing the type &lt;type&gt; and signature &lt;signature&gt;�and the declared object ID &lt;object�ID=&quot;&lt;number&gt;&quot;&gt; which should be initialized. Furthermore parameter(s) can be defined and used for the initialization.</p>
            <table class="codeframe">
                <tr>
                    <td>
                        <pre class="prettyprint">
	&lt;actions&gt;
	    &lt;blocks&gt;
		&lt;block�ID=&quot;0&quot;&gt;
		    &lt;name&gt;Fixation_Block&lt;/name&gt;
		    &lt;block_number&gt;0&lt;/block_number&gt;
		    &lt;nr_of_trials&gt;1&lt;/nr_of_trials&gt;
		    &lt;nr_of_internal_triggers&gt;8&lt;/nr_of_internal_triggers&gt;
		    &lt;nr_of_external_triggers&gt;1&lt;/nr_of_external_triggers&gt;
		    &lt;object�ID=&quot;1&quot;&gt;
			&lt;parameters&gt;
			    parameter�ID=&quot;0&quot;&gt;
				&lt;name&gt;RetinoPattern&lt;/name&gt;
				&lt;value&gt;fixation&lt;/value&gt;
			    &lt;/parameter&gt;
			    &lt;parameter�ID=&quot;1&quot;&gt;
				&lt;name&gt;ShowFixPoint&lt;/name&gt;
				&lt;value&gt;true&lt;/value&gt;
			    &lt;/parameter&gt;
			&lt;/parameters&gt;
		    &lt;/object&gt;
		&lt;/block&gt;
		&lt;block�ID=&quot;1&quot;&gt;
		    &lt;name&gt;PolarAngle_Block&lt;/name&gt;
		    &lt;block_number&gt;1&lt;/block_number&gt;
		    &lt;nr_of_trials&gt;6&lt;/nr_of_trials&gt;
		    &lt;nr_of_internal_triggers&gt;36&lt;/nr_of_internal_triggers&gt;
		    &lt;nr_of_external_triggers&gt;1&lt;/nr_of_external_triggers&gt;
		    &lt;object�ID=&quot;1&quot;&gt;
			&lt;/parameters&gt;
		    &lt;/object&gt;
	    &lt;/blocks&gt;
	&lt;/actions&gt;
	</pre>
                    </td>
                </tr>
            </table>
            <p>When the experiment starts the section within the &lt;actions&gt; tag is executed. In case of a triggered block design you can specify the different blocks within the &lt;blocks&gt;�section. The &lt;block_number&gt; defines the order of the blocks and how they are sequentially processed during the execution of the experiment. Within a defined block the &lt;nr_of_trials&gt; defines how many times the block is executed before going to the next block. </p>
            <p>A block trial is externally triggered by an external source, like a hardware trigger device or a declared automatic trigger timer. This external source is then connected inside the &lt;connections&gt; section to the Experiment Manager default receive slot with the signature incrementExternalTrigger(). By making use of this slot the Experiment manager know when it should switch to another block depending on the configuration within the &lt;blocks&gt;�section. At each incrementExternalTrigger()�slot execution the External Trigger count is incremented.. It takes &lt;nr_of_external_triggers&gt;�amount of External Triggers before the Internal Trigger count is incremented, thus this works like a sort of trigger divider (External-&gt;Internal). After &lt;nr_of_internal_triggers&gt;�amount of Internal Triggers the Experiment manager switched to the next block trial.</p>
            <p>In the above example the first fixation�block takes 8 external triggers. In case a trigger is send each 2 seconds the first block trial is 16 seconds visible on the screen.</p>
            <h2>Retinotopic Mapping</h2>
            <p><span lang="en-us">refer to parameters here!</span></p>
            <h2>Experiment Manager Usage</h2>
            <p>When you start the Experiment Manager and run an experiment it shows (after the initialization &lt;initializations&gt; section) first an informative screen were you need to press the ?TAB? key to proceed or the ?CTRL+a? key combination to abort the experiment (You may also use this combination during a running experiment to abort). After you pressed the ?TAB? key it waits for the first Internal Trigger. After it receives this trigger the experiment starts running.</p>
            <h2>Experiment Manager Public Signal and Slots</h2>
            <p>The Experiment Manager exposes several <strong>public Signals and Slots</strong> that can be used from within c++ code, a script context or experiment file. These are explained in the <a href="../../Script/ExperimentManagerPlugin/Doxygen/class_experiment_manager.html">Experiment Manager script class reference</a>.</p>
            <h2>Additional available script classes</h2>
            <p>There are some additional classes defined inside the Experiment Manager which can be used to derive a new object from trough the BrainStim script environment, these are:</p>
            <h3>ImageProcessor</h3>
            <h3>PRTFormatManager</h3>
            <h3>TriggerTimer and ExperimentTimer</h3>
            <h3>ExperimentStructure</h3>
            <h3>QML2Viewer</h3>
            <h3>RandomGenerator</h3>
            <p>&nbsp;</p>
        </div>
    </div>
<!--doc-version-default-footer-begin-->
<!-- Please do not edit the below line(s) manually, see DocumentVersioning.qs (151018182358), version 1.0.0.1-->
	<script type="text/javascript">document.body.onload = function() {prettyPrint()};</script>
<!--doc-version-default-footer-end-->
</body>
</html>
