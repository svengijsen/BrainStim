<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>ExperimentManager script class: ExperimentTimer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ExperimentManager script class
   &#160;<span id="projectnumber">1.1.0.1</span>
   </div>
   <div id="projectbrief">The Experiment Manager script class reference.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5dbeae92501f106d4bd71d52ddebc644.html">BrainStim</a></li><li class="navelem"><a class="el" href="dir_adc76f4b9d50493838512b1f89bd7b07.html">Source</a></li><li class="navelem"><a class="el" href="dir_8755458e46ab3caf702c8d8354abd2f1.html">Plugins</a></li><li class="navelem"><a class="el" href="dir_e21017eb15a4b2dcae314fa0fbd0715b.html">ExperimentManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ExperimentTimer.h</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//ExperimentManagerplugin</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">//Copyright (C) 2015  Sven Gijsen and Michael Luehrs</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//This file is part of BrainStim.</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">//BrainStim is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">//the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">//(at your option) any later version.</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">//This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">//MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">//GNU General Public License for more details.</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">//You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#ifndef EXPERIMENTTIMER_H</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#define EXPERIMENTTIMER_H</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;QObject&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;QtScript&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#ifdef WIN32   // Windows 32 system specific</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#ifdef WIN64   // Windows 64 system specific</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;windows.h&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#else          // Unix based system specific</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#endif          </span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//#include &lt;sys/time.h&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//#endif</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00044"></a><span class="lineno"><a class="line" href="class_experiment_timer.html">   44</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_experiment_timer.html">ExperimentTimer</a> : <span class="keyword">public</span> QObject</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        Q_OBJECT</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;signals:</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#a77a4c5d514f5b57ef5f53ca6f5d8194f">triggeredTimerLoopInvoked</a>();</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keyword">public</span>:</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="code" href="class_experiment_timer.html">ExperimentTimer</a>(QObject *parent = NULL);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <a class="code" href="class_experiment_timer.html">ExperimentTimer</a>(<span class="keyword">const</span> <a class="code" href="class_experiment_timer.html">ExperimentTimer</a>&amp; other ){Q_UNUSED(other);};<span class="comment">//TODO fill in copy constructor, should be declared for the Q_DECLARE_METATYPE macro</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        ~<a class="code" href="class_experiment_timer.html">ExperimentTimer</a>();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        <span class="keyword">static</span> QScriptValue ctor__experimentTimer(QScriptContext* context, QScriptEngine* engine);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        <span class="keyword">static</span> <span class="keywordtype">bool</span> SleepMSecAccurate_old(<span class="keywordtype">double</span> mSecs);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="keyword">public</span> slots:</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        <span class="keywordtype">bool</span> makeThisAvailableInScript(QString strObjectScriptName = <span class="stringliteral">&quot;&quot;</span>, QObject *engine = NULL);<span class="comment">//To make the objects (e.g. defined in a *.exml file) available in the script</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#aac042bba6c3d51a1c854f149ae305203">start</a>();                                                                   <span class="comment">// start timer</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#ad59bdbf085fd1b89d61d858dea25393d">stop</a>();                                                                    <span class="comment">// stop the timer</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment"></span>        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#a5573a1b658e3be3da0bad6e5d4a2d72c">restart</a>();                                                                 <span class="comment">// restart the timer</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment"></span>        <span class="keywordtype">double</span> <a class="code" href="class_experiment_timer.html#abfd43e259c74973bb41ae017389d2024">getElapsedTime</a>();                                                <span class="comment">// get elapsed time in seconds</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment"></span>        <span class="keywordtype">double</span> <a class="code" href="class_experiment_timer.html#a4d42aaf67576361638eb9cc85ca7e6e0">getElapsedTimeInSec</a>();                                   <span class="comment">// get elapsed time in second (same as getElapsedTime)</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment"></span>        <span class="keywordtype">double</span> <a class="code" href="class_experiment_timer.html#a1bc4d0d4762d596789d8c202f608007b">getElapsedTimeInMilliSec</a>();                              <span class="comment">// get elapsed time in milli seconds</span></div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment"></span>        <span class="keywordtype">double</span> <a class="code" href="class_experiment_timer.html#a64823414074d5942eab5ec0195c7583d">getElapsedTimeInMicroSec</a>();                              <span class="comment">// get elapsed time in micro-second</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment"></span>        <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="class_experiment_timer.html#affa748074913dbee9dd8b622c0f19ccf">SleepMSecAccurate</a>(<span class="keywordtype">double</span> mSecs);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#a7540fa5b15b731ae6bd87667881807d8">startTriggeredTimerLoop</a>(<span class="keywordtype">double</span> nIntervalTimeMSecs);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        <span class="keywordtype">void</span> <a class="code" href="class_experiment_timer.html#a39f7c892da81cf863f4c5e766ca9fea5">stopTriggeredTimerLoop</a>();</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="keyword">private</span>:</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;        QScriptEngine* currentScriptEngine;</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordtype">double</span> startTimeInMicroSec;                                             <span class="comment">// starting time in micro-second</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        <span class="keywordtype">double</span> endTimeInMicroSec;                                               <span class="comment">// ending time in micro-second</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        <span class="keywordtype">int</span>    stopped;                                                                 <span class="comment">// stop flag </span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="preprocessor">#ifdef WIN32</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        LARGE_INTEGER frequency;                                                <span class="comment">// ticks per second</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        LARGE_INTEGER startCount;                   </div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;        LARGE_INTEGER endCount;                     </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        timeval startCount;                         </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        timeval endCount;                           </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        <span class="keywordtype">bool</span> terminateTriggeredTimerLoop;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;        </div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;};</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="preprocessor">#endif // EXPERIMENTTIMER_H</span></div>
<div class="ttc" id="class_experiment_timer_html_a1bc4d0d4762d596789d8c202f608007b"><div class="ttname"><a href="class_experiment_timer.html#a1bc4d0d4762d596789d8c202f608007b">ExperimentTimer::getElapsedTimeInMilliSec</a></div><div class="ttdeci">double getElapsedTimeInMilliSec()</div><div class="ttdoc">Returns the elapsed time since the internal timer was started in milli-seconds. This function returns...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:111</div></div>
<div class="ttc" id="class_experiment_timer_html_a77a4c5d514f5b57ef5f53ca6f5d8194f"><div class="ttname"><a href="class_experiment_timer.html#a77a4c5d514f5b57ef5f53ca6f5d8194f">ExperimentTimer::triggeredTimerLoopInvoked</a></div><div class="ttdeci">void triggeredTimerLoopInvoked()</div><div class="ttdoc">The timeout Signal. </div></div>
<div class="ttc" id="class_experiment_timer_html_aac042bba6c3d51a1c854f149ae305203"><div class="ttname"><a href="class_experiment_timer.html#aac042bba6c3d51a1c854f149ae305203">ExperimentTimer::start</a></div><div class="ttdeci">void start()</div><div class="ttdoc">Starts the internal timer in the ExperimentTimer that keeps track of the elapsed time. This function starts the internal timer in the ExperimentTimer for keeping track of the elapsed time. See also ExperimentTimer.getElapsedTime(), ExperimentTimer.restart(), ExperimentTimer.stop(). </div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:72</div></div>
<div class="ttc" id="class_experiment_timer_html_a64823414074d5942eab5ec0195c7583d"><div class="ttname"><a href="class_experiment_timer.html#a64823414074d5942eab5ec0195c7583d">ExperimentTimer::getElapsedTimeInMicroSec</a></div><div class="ttdeci">double getElapsedTimeInMicroSec()</div><div class="ttdoc">Returns the elapsed time since the internal timer was started in micro-seconds. This function returns...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:94</div></div>
<div class="ttc" id="class_experiment_timer_html_a4d42aaf67576361638eb9cc85ca7e6e0"><div class="ttname"><a href="class_experiment_timer.html#a4d42aaf67576361638eb9cc85ca7e6e0">ExperimentTimer::getElapsedTimeInSec</a></div><div class="ttdeci">double getElapsedTimeInSec()</div><div class="ttdoc">Returns the elapsed time since the internal timer was started in seconds. This function returns the e...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:116</div></div>
<div class="ttc" id="class_experiment_timer_html_a39f7c892da81cf863f4c5e766ca9fea5"><div class="ttname"><a href="class_experiment_timer.html#a39f7c892da81cf863f4c5e766ca9fea5">ExperimentTimer::stopTriggeredTimerLoop</a></div><div class="ttdeci">void stopTriggeredTimerLoop()</div><div class="ttdoc">Stops the running periodic interval thread from the ExperimentTimer. This function stops the running ...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:224</div></div>
<div class="ttc" id="class_experiment_timer_html_abfd43e259c74973bb41ae017389d2024"><div class="ttname"><a href="class_experiment_timer.html#abfd43e259c74973bb41ae017389d2024">ExperimentTimer::getElapsedTime</a></div><div class="ttdeci">double getElapsedTime()</div><div class="ttdoc">See ExperimentTimer.getElapsedTimeInSec() </div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:121</div></div>
<div class="ttc" id="class_experiment_timer_html_a7540fa5b15b731ae6bd87667881807d8"><div class="ttname"><a href="class_experiment_timer.html#a7540fa5b15b731ae6bd87667881807d8">ExperimentTimer::startTriggeredTimerLoop</a></div><div class="ttdeci">void startTriggeredTimerLoop(double nIntervalTimeMSecs)</div><div class="ttdoc">Starts the ExperimentTimer at a periodic interval time. This function starts the Experiment Timer and...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:211</div></div>
<div class="ttc" id="class_experiment_timer_html"><div class="ttname"><a href="class_experiment_timer.html">ExperimentTimer</a></div><div class="ttdoc">The ExperimentTimer class. </div><div class="ttdef"><b>Definition:</b> ExperimentTimer.h:44</div></div>
<div class="ttc" id="class_experiment_timer_html_ad59bdbf085fd1b89d61d858dea25393d"><div class="ttname"><a href="class_experiment_timer.html#ad59bdbf085fd1b89d61d858dea25393d">ExperimentTimer::stop</a></div><div class="ttdeci">void stop()</div><div class="ttdoc">Stops the internal timer in the ExperimentTimer that keeps track of the elapsed time. This function stops the internal timer in the ExperimentTimer for keeping track of the elapsed time. See also ExperimentTimer.getElapsedTime(), ExperimentTimer.restart(), ExperimentTimer.start(). </div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:83</div></div>
<div class="ttc" id="class_experiment_timer_html_a5573a1b658e3be3da0bad6e5d4a2d72c"><div class="ttname"><a href="class_experiment_timer.html#a5573a1b658e3be3da0bad6e5d4a2d72c">ExperimentTimer::restart</a></div><div class="ttdeci">void restart()</div><div class="ttdoc">Restarts the internal timer in the ExperimentTimer that keeps track of the elapsed time...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:66</div></div>
<div class="ttc" id="class_experiment_timer_html_affa748074913dbee9dd8b622c0f19ccf"><div class="ttname"><a href="class_experiment_timer.html#affa748074913dbee9dd8b622c0f19ccf">ExperimentTimer::SleepMSecAccurate</a></div><div class="ttdeci">static bool SleepMSecAccurate(double mSecs)</div><div class="ttdoc">Makes the current thread go to sleep accurately for a specified amount of time. This function makes t...</div><div class="ttdef"><b>Definition:</b> ExperimentTimer.cpp:186</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 16 2015 14:50:19 for ExperimentManager script class by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
